<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Tra cứu ĐVHC</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="stylesheet" href="bt.css" />
</head>
<body class="p-4">
    <div class="container pb-4" style="min-height:calc(100vh - 68px)">
        <div class="row g-2">
            <div class="col mt-0 py-2">
                <input id="keywordInput" type="text" class="form-control" placeholder="Nhập địa danh ..." required>
            </div>
            <div class="col-auto mt-0">
                <button type="button" class="btn p-0" onclick="handleSearch()">
                    <svg height="46" viewBox="0 0 1792 1792" width="46" xmlns="http://www.w3.org/2000/svg"><path d="M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z" /></svg>
                </button>
            </div>
        </div>
        <div id="resultArea" class="row mt-1 g-2"></div>
    </div>
    <div class="row g-2 justify-content-center">
        <div class="col-auto mt-0">
            <img style="width:36px; height:36px; border-radius:50%" src="data:image/png;base64,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" />
        </div>
        <div class="col-auto mt-0">
            <p class="my-2">Crawled info by <a target="_blank" href="https://sanglesoft.github.io">Sanglesoft</a> and hosted in <a target="_blank" href="https://github.com/sanglesoft/dvhc">Github</a></p>
        </div>
    </div>
    <div class="modal fade" id="thongTinSNModal" tabindex="-1" aria-labelledby="thongTinSNModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="thongTinSNModalLabel">Thông tin sáp nhập Chi Tiết</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>
    <div id="globalOverlay" class="overlay hidden">
        <div class="spinner"></div>
    </div>
    <script src="bt.js"></script>
    <script src="db.js"></script>

    <script>
        const Overlay = {
            show() {
                document.getElementById('globalOverlay').classList.remove('hidden');
            },
            hide() {
                document.getElementById('globalOverlay').classList.add('hidden');
            }
        };
        // === Bắt sự kiện tìm kiếm ===
        function debounce(func, delay) {
            let timeout;
            return function (...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), delay);
            };
        }
        const keywordInput = document.getElementById('keywordInput');
        const resultArea = document.getElementById('resultArea');
        const handleSearch = async () => {
            Overlay.show();
            resultArea.innerHTML = '';

            setTimeout(async () => {
                const keyword = keywordInput.value.trim();
                if (keyword.length > 5) {
                    const results = timTenDayDu(keyword, dataOld, dataNew, dataMerge);
                    await displayResults(results);
                } else {
                    resultArea.innerHTML = '';
                }
            }, 500);

            setTimeout(() => {
                Overlay.hide();
            }, 500);
        };

        keywordInput.addEventListener('keydown', function (e) {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });
        // === Hiển thị kết quả dạng card Bootstrap ===
        async function displayResults(results) {
            resultArea.innerHTML = '';

            const svgIcon = `
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-card-text" viewBox="0 0 16 16"><path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2z"></path> <path d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8m0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5"></path></svg>`;
            const createButton = (buttonId) => `
                <button class="btn btn-sm btn-link small pt-0" style="line-height: .5rem;" id="${buttonId}">
                    ${svgIcon}
                </button>`;

            results.forEach((record, index) => {
                const card = document.createElement('div');
                card.className = 'col-12';
                const buttonId = `btnThongTinSN${index}`;

                let tableRows = '';

                if (record.SauSN) {
                    tableRows = `
                        <tr>
                            <td rowspan="2" style="width:66px" class="text-success fw-bold">Sau sáp nhập</td>
                            <td colspan="2" class="bg-light fw-bold text-success">
                                ${capitalizeFirstLetter(record.Ten)}
                                ${createButton(buttonId)}
                            </td>
                        </tr>
                        <tr>
                            <td><span class="small text-muted">Mã xã</span><br/><strong class="text-success">${record.MAXA}</strong></td>
                            <td><span class="small text-muted">Mã tỉnh</span><br/><strong class="text-success">${record.MATINH}</strong></td>
                        </tr>`;
                } else if (record.MAXA) {
                    tableRows = `
                        <tr>
                            <td rowspan="2" style="width:66px" class="fw-bold">Trước sáp nhập</td>
                            <td colspan="6" class="fw-bold">${capitalizeFirstLetter(record.Ten)}</td>
                        </tr>
                        <tr>
                            <td colspan="2"><span class="small text-muted">Mã xã</span><br/>${record.MAXA}</td>
                            <td colspan="2"><span class="small text-muted">Mã huyện</span><br/>${record.MAHUYEN}</td>
                            <td colspan="2"><span class="small text-muted">Mã tỉnh</span><br/>${record.MATINH}</td>
                        </tr>
                        <tr>
                            <td rowspan="2" style="width:66px" class="text-success fw-bold">Sau sáp nhập</td>
                            <td colspan="6" class="bg-light fw-bold text-success">
                                ${capitalizeFirstLetter(record.ThongTinSauSN ? record.ThongTinSauSN.Ten : '')}
                                ${createButton(buttonId)}
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3"><span class="small text-muted">Mã xã</span><br/><strong class="text-success">${record.ThongTinSauSN ? record.ThongTinSauSN.MaXa : ''}</strong></td>
                            <td colspan="3"><span class="small text-muted">Mã tỉnh</span><br/><strong class="text-success">${record.ThongTinSauSN ? record.ThongTinSauSN.MaTinh : ''}</strong></td>
                        </tr>`;
                } else if (!record.MAXA && record.MATINH && !record.MAHUYEN) {
                    tableRows = `
                        <tr>
                            <td rowspan="2" style="width:66px" class="fw-bold">Trước sáp nhập</td>
                            <td colspan="6" class="fw-bold">${capitalizeFirstLetter(record.Ten)}</td>
                        </tr>
                        <tr>
                            <td colspan="6"><span class="small text-muted">Mã tỉnh</span><br/>${record.MATINH}</td>
                        </tr>
                        <tr>
                            <td rowspan="2" style="width:66px" class="text-success fw-bold">Sau sáp nhập</td>
                            <td colspan="6" class="bg-light fw-bold text-success">
                                ${capitalizeFirstLetter(record.ThongTinSauSN ? record.ThongTinSauSN.Ten : '')}
                                ${createButton(buttonId)}
                            </td>
                        </tr>
                        <tr>
                            <td colspan="6"><span class="small text-muted">Mã tỉnh</span><br/><strong class="text-success">${record.ThongTinSauSN ? record.ThongTinSauSN.MaTinh : ''}</strong></td>
                        </tr>`;
                } else {
                    tableRows = `
                        <tr>
                            <td rowspan="2" style="width:66px" class="fw-bold">Trước sáp nhập</td>
                            <td colspan="2" class="fw-bold">${capitalizeFirstLetter(record.Ten)}
                                ${createButton(buttonId)}
                            </td>
                        </tr>
                        <tr>
                            <td><span class="small text-muted">Mã huyện</span><br/>${record.MAHUYEN}</td>
                            <td><span class="small text-muted">Mã tỉnh</span><br/>${record.MATINH}</td>
                        </tr>
                        <tr>
                            <td style="width:66px" class="text-success fw-bold">Sau sáp nhập</td>
                            <td colspan="2" class="fw-bold text-center text-warning">Không tổ chức cấp huyện</td>
                        </tr>`;
                }

                const tableHTML = `
                    <table class="table text-center m-0 table-sm align-middle rounded-2">
                        ${tableRows}
                    </table>`;

                card.innerHTML = `
                    <div class="card shadow-sm h-100 overflow-hidden">
                        <div class="card-body p-0 overflow-hidden">
                            ${tableHTML}
                        </div>
                    </div>`;

                const button = card.querySelector(`#${buttonId}`);

                const modalElement = document.getElementById('thongTinSNModal');
                const modalBody = modalElement.querySelector('.modal-body');
                button.addEventListener('click', () => {
                    modalBody.innerHTML = record.ThongTinSN.slice(0, record.MAXA ? 4 : 3).map(t => `<div class="mb-2">${t}</div>`).join('');

                    const modal = new bootstrap.Modal(modalElement);
                    modal.show();

                });
                modalElement.addEventListener('hide.bs.modal', () => {
                    if (document.activeElement) {
                        document.activeElement.blur();
                    }
                });

                resultArea.appendChild(card);
            });
        }

        function capitalizeFirstLetter(str) {
            if (str.length === 0) {
                return str; // Trả về chuỗi rỗng nếu str rỗng
            }
            return str.charAt(0).toUpperCase() + str.slice(1);
        }
        function normalizeJsonText(obj) {
            if (typeof obj === 'string') {
                return obj.normalize('NFC');
            } else if (Array.isArray(obj)) {
                return obj.map(item => normalizeJsonText(item));
            } else if (typeof obj === 'object' && obj !== null) {
                const result = {};
                for (const [key, value] of Object.entries(obj)) {
                    result[key] = normalizeJsonText(value);
                }
                return result;
            } else {
                return obj;
            }
        }
        function normalizeString(s) {
            return s.normalize('NFC').replace(/\s+/g, ' ').trim();
        }
        function loaiBoTienToTen(t) {
            return t.replace(/^(Tỉnh|Tp|Thành\s+Phố|Thành phố)\s+/i, '').trim();
        }

        function loaiBoTienToTenCapDuoi(t) {
            return t.replace(/^(Xã|Phường|Thị Trấn|Thị trấn|TT|Quận|Huyện|Thành phố)\s+/i, '').trim();
        }

        function chuanHoaTuKhoaTimKiem(keyword) {
            const parts = keyword.split(',').slice(-3).map(part => part.trim()).filter(p => p !== '');
            return parts.map(part => {
                part = part.normalize('NFC');
                part = loaiBoTienToTen(part);
                part = loaiBoTienToTenCapDuoi(part);
                return part;
            });
        }

        dataOld = normalizeJsonText(dataOld);
        dataNew = normalizeJsonText(dataNew);
        dataMerge = normalizeJsonText(dataMerge);

        function timTenDayDu(keyword, dataOld, dataNew, dataMerge) {
            const maMapOld = new Map();
            dataOld.forEach(item => maMapOld.set(item.MaDVHC, item));
            const maMapNew = new Map();
            dataNew.forEach(item => maMapNew.set(item.MaDVHC, item));

            function layTenVaMa(item, maMap, ketQua = { Ten: '', MAXA: '', MAHUYEN: '', MATINH: '' }) {
                if (!item) return ketQua;

                ketQua.Ten = (ketQua.Ten ? ketQua.Ten + ', ' + item.Ten : item.Ten);

                if (item.Cap === 'XA' || item.Cap === 'TT') {
                    ketQua.MAXA = item.MaDVHC;
                } else if (item.Cap === 'HUYEN' || item.Cap === 'QH') {
                    ketQua.MAHUYEN = item.MaDVHC;
                } else if (item.Cap === 'TINH' || item.Cap === 'TP') {
                    ketQua.MATINH = item.MaDVHC;
                }

                if (item.CapTren !== "0") {
                    const capTren = maMap.get(item.CapTren);
                    return layTenVaMa(capTren, maMap, ketQua);
                }

                return ketQua;
            }

            function timThongTinSN(record, mergeRecord) {
                const thongTinSN = [];
                const tenParts = record.Ten.split(',').map(part => part.trim());
                const tenTruoc = tenParts[0];
                const tenSau = tenParts[tenParts.length - 1];
                const tenGiua = tenParts.length >= 3 ? tenParts[1] : '';

                if (mergeRecord) {
                    thongTinSN.push(
                        mergeRecord.ThongTin[0] || '',
                        mergeRecord.ThongTin[1] || '',
                        mergeRecord.ThongTin[2] || ''
                    );

                    const isCapTinh = record.MATINH && !record.MAHUYEN && !record.MAXA;
                    if (!isCapTinh) {
                        const conds = [];
                        const tenTruocProcessed = loaiBoTienToTen(tenTruoc);
                        const tenTruocNoPrefixProcessed = loaiBoTienToTenCapDuoi(tenTruocProcessed);
                        const tenGiuaProcessed = loaiBoTienToTenCapDuoi(loaiBoTienToTen(tenGiua));

                        // Ưu tiên tìm đủ cấp xã
                        if (record.MAXA && record.MAHUYEN && record.MATINH) {
                            conds.push(
                                info => info.toLowerCase().includes(tenTruocProcessed.toLowerCase()) &&
                                    info.toLowerCase().includes(tenGiuaProcessed.toLowerCase()),
                                info => info.toLowerCase().includes(tenTruocNoPrefixProcessed.toLowerCase()) &&
                                    info.toLowerCase().includes(tenGiuaProcessed.toLowerCase())
                            );
                        }

                        // Tìm cấp xã hoặc huyện
                        conds.push(
                            info => info.toLowerCase().includes(tenTruocProcessed.toLowerCase()),
                            info => info.toLowerCase().includes(tenTruocNoPrefixProcessed.toLowerCase())
                        );

                        let thongTinPhu = [];
                        for (const cond of conds) {
                            thongTinPhu = mergeRecord.ThongTin.filter(cond);
                            if (thongTinPhu.length >= 1) break;
                        }

                        thongTinSN.push(...thongTinPhu);
                    }
                }

                return thongTinSN;
            }

            function timMergeRecord(tenSauProcessed, record) {
                let mergeRecord = null;

                if (record.SauSN) {
                    mergeRecord = dataMerge.find(item =>
                        item.Tinh.toLowerCase().includes(tenSauProcessed.toLowerCase())
                    );
                } else {
                    mergeRecord = dataMerge.find(item =>
                        item.TinhSN.some(tinh =>
                            tinh.toLowerCase().includes(tenSauProcessed.toLowerCase())
                        )
                    );
                    if (!mergeRecord) {
                        mergeRecord = dataMerge.find(item =>
                            item.Tinh.toLowerCase().includes(tenSauProcessed.toLowerCase())
                        );
                    }
                }

                return mergeRecord;
            }
            function xuLyThongTinSauSN(record, mergeRecord) {
                const thongTinCuoi = record.ThongTinSN[3] || '';
                const match = thongTinCuoi.match(/có tên gọi là\s+(.+)$/i);
                const tenXaMoi = match ? match[1].trim() : '';

                const isCapTinh = record.MATINH !== '' && record.MAHUYEN === '' && record.MAXA === '';

                if (tenXaMoi) {
                    const tenTinhMoi = mergeRecord.Tinh;
                    const tenDayDuMoi = `${tenXaMoi}, ${tenTinhMoi}`;

                    const tuKhoaParts = chuanHoaTuKhoaTimKiem(tenDayDuMoi);
                    const xaMoiRecord = dataNew.find(item => {
                        const tenDayDu = layTenVaMa(item, maMapNew).Ten.normalize('NFC').toLowerCase();
                        return tuKhoaParts.every(part =>
                            tenDayDu.includes(part.toLowerCase())
                        );
                    });

                    if (xaMoiRecord) {
                        record.ThongTinSauSN = {
                            Ten: tenDayDuMoi,
                            MaTinh: xaMoiRecord.CapTren,
                            MaXa: xaMoiRecord.MaDVHC
                        };
                    }
                } else if (isCapTinh) {
                    const tenTinhMoi = mergeRecord.Tinh;
                    const tuKhoaParts = chuanHoaTuKhoaTimKiem(tenTinhMoi);

                    const tinhMoiRecord = dataNew.filter(item => item.Cap === 'TINH').find(item => {
                       return tuKhoaParts.every(part =>
                            item.Ten.normalize('NFC').toLowerCase().includes(part.toLowerCase())
                        )
                    });
                    if (tinhMoiRecord) {
                        record.ThongTinSauSN = {
                            Ten: tenTinhMoi,
                            MaTinh: tinhMoiRecord.MaDVHC,
                            MaXa: ''
                        };
                    } else {
                        record.ThongTinSauSN = {
                            Ten: tenTinhMoi,
                            MaTinh: '',
                            MaXa: ''
                        };
                    }
                }
            }
            const ketQuaOld = dataOld
                .filter(item => {
                    const tuKhoaParts = chuanHoaTuKhoaTimKiem(keyword);
                    const tenDayDu = layTenVaMa(item, maMapOld).Ten.normalize('NFC').toLowerCase();
                    return tuKhoaParts.every(part =>
                        tenDayDu.includes(part.toLowerCase())
                    );
                })
                .map(item => {
                    const ketQua = layTenVaMa(item, maMapOld);
                    const record = { ...ketQua, SauSN: false };

                    const tenParts = record.Ten.split(',').map(part => part.trim());
                    const tenSau = tenParts[tenParts.length - 1];
                    const tenSauProcessed = loaiBoTienToTen(tenSau);
                    const mergeRecord = timMergeRecord(tenSauProcessed, record);

                    record.ThongTinSN = timThongTinSN(record, mergeRecord);
                    if (mergeRecord && (record.MAXA || (record.MATINH && !record.MAHUYEN))) {
                        xuLyThongTinSauSN(record, mergeRecord);
                    }
                    return record;
                });

            const ketQuaNew = dataNew
                .filter(item => {
                    const tuKhoaParts = chuanHoaTuKhoaTimKiem(keyword);
                    const tenDayDu = layTenVaMa(item, maMapNew).Ten.normalize('NFC').toLowerCase();
                    return tuKhoaParts.every(part =>
                        tenDayDu.includes(part.toLowerCase())
                    );
                })
                .map(item => {
                    const ketQua = layTenVaMa(item, maMapNew);
                    const record = { ...ketQua, SauSN: true };

                    const tenParts = record.Ten.split(',').map(part => part.trim());
                    const tenSau = tenParts[tenParts.length - 1];
                    const tenSauProcessed = loaiBoTienToTen(tenSau);
                    const mergeRecord = timMergeRecord(tenSauProcessed, record);

                    record.ThongTinSN = timThongTinSN(record, mergeRecord);
                    return record;
                });

            return [...ketQuaOld, ...ketQuaNew];
        }

        function exportToJsonFile(data, fileName = 'export.json') {
            const jsonStr = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            a.click();

            URL.revokeObjectURL(url);
        }
    </script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js').then(registration => {
                    console.log('ServiceWorker registered with scope:', registration.scope);
                }).catch(error => {
                    console.error('ServiceWorker registration failed:', error);
                });
            });
        }
    </script>
</body>
</html>  